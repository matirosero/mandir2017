jQuery(document).ready(function(e){e(document).foundation()}),!function(e,t,n){function i(e,t){return typeof e===t}function s(){var e,t,n,s,o,a,l;for(var d in y)if(y.hasOwnProperty(d)){if(e=[],t=y[d],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(s=i(t.fn,"function")?t.fn():t.fn,o=0;o<e.length;o++)a=e[o],l=a.split("."),1===l.length?C[l[0]]=s:(!C[l[0]]||C[l[0]]instanceof Boolean||(C[l[0]]=new Boolean(C[l[0]])),C[l[0]][l[1]]=s),w.push((s?"":"no-")+l.join("-"))}}function o(e){var t=B.className,n=C._config.classPrefix||"";if(H&&(t=t.baseVal),C._config.enableJSClass){var i=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(i,"$1"+n+"js$2")}C._config.enableClasses&&(t+=" "+n+e.join(" "+n),H?B.className.baseVal=t:B.className=t)}function a(e,t){return function(){return e.apply(t,arguments)}}function l(e,t,n){var s;for(var o in e)if(e[o]in t)return n===!1?e[o]:(s=t[e[o]],i(s,"function")?a(s,n||t):s);return!1}function d(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):H?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function r(e,t){return!!~(""+e).indexOf(t)}function h(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function m(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function f(){var e=t.body;return e||(e=d(H?"svg":"body"),e.fake=!0),e}function c(e,n,i,s){var o,a,l,r,h="modernizr",m=d("div"),c=f();if(parseInt(i,10))for(;i--;)l=d("div"),l.id=s?s[i]:h+(i+1),m.appendChild(l);return o=d("style"),o.type="text/css",o.id="s"+h,(c.fake?c:m).appendChild(o),c.appendChild(m),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),m.id=h,c.fake&&(c.style.background="",c.style.overflow="hidden",r=B.style.overflow,B.style.overflow="hidden",B.appendChild(c)),a=n(m,e),c.fake?(c.parentNode.removeChild(c),B.style.overflow=r,B.offsetHeight):m.parentNode.removeChild(m),!!a}function u(t,i){var s=t.length;if("CSS"in e&&"supports"in e.CSS){for(;s--;)if(e.CSS.supports(m(t[s]),i))return!0;return!1}if("CSSSupportsRule"in e){for(var o=[];s--;)o.push("("+m(t[s])+":"+i+")");return o=o.join(" or "),c("@supports ("+o+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return n}function p(e,t,s,o){function a(){m&&(delete M.style,delete M.modElem)}if(o=!i(o,"undefined")&&o,!i(s,"undefined")){var l=u(e,s);if(!i(l,"undefined"))return l}for(var m,f,c,p,v,g=["modernizr","tspan","samp"];!M.style&&g.length;)m=!0,M.modElem=d(g.shift()),M.style=M.modElem.style;for(c=e.length,f=0;c>f;f++)if(p=e[f],v=M.style[p],r(p,"-")&&(p=h(p)),M.style[p]!==n){if(o||i(s,"undefined"))return a(),"pfx"!=t||p;try{M.style[p]=s}catch(w){}if(M.style[p]!=v)return a(),"pfx"!=t||p}return a(),!1}function v(e,t,n,s,o){var a=e.charAt(0).toUpperCase()+e.slice(1),d=(e+" "+E.join(a+" ")+a).split(" ");return i(t,"string")||i(t,"undefined")?p(d,t,s,o):(d=(e+" "+k.join(a+" ")+a).split(" "),l(d,t,n))}function g(e,t,i){return v(e,n,n,t,i)}var w=[],y=[],x={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){y.push({name:e,fn:t,options:n})},addAsyncTest:function(e){y.push({name:null,fn:e})}},C=function(){};C.prototype=x,C=new C;var B=t.documentElement,H="svg"===B.nodeName.toLowerCase(),b="Moz O ms Webkit",E=x._config.usePrefixes?b.split(" "):[];x._cssomPrefixes=E;var k=x._config.usePrefixes?b.toLowerCase().split(" "):[];x._domPrefixes=k;var S={elem:d("modernizr")};C._q.push(function(){delete S.elem});var M={style:S.elem.style};C._q.unshift(function(){delete M.style}),x.testAllProps=v,x.testAllProps=g,C.addTest("csstransitions",g("transition","all",!0)),s(),o(w),delete x.addTest,delete x.addAsyncTest;for(var T=0;T<C._q.length;T++)C._q[T]();e.Modernizr=C}(window,document),jQuery(document).ready(function(e){function t(e){this.element=e,this.timeline=this.element.find(".timeline"),this.timelineItems=this.timeline.find("li"),this.timelineItemsNumber=this.timelineItems.length,this.timelineStart=i(this.timelineItems.eq(0).text()),this.timelineUnitDuration=i(this.timelineItems.eq(1).text())-i(this.timelineItems.eq(0).text()),this.eventsWrapper=this.element.find(".events"),this.eventsGroup=this.eventsWrapper.find(".events-group"),this.singleEvents=this.eventsGroup.find(".single-event"),this.eventSlotHeight=this.eventsGroup.eq(0).children(".top-info").outerHeight(),this.modal=this.element.find(".event-modal"),this.modalHeader=this.modal.find(".header"),this.modalHeaderBg=this.modal.find(".header-bg"),this.modalBody=this.modal.find(".body"),this.modalBodyBg=this.modal.find(".body-bg"),this.modalMaxWidth=800,this.modalMaxHeight=480,this.animating=!1,this.initSchedule()}function n(){d.forEach(function(e){e.scheduleReset()}),r=!1}function i(e){e=e.replace(/ /g,"");var t=e.split(":"),n=60*parseInt(t[0])+parseInt(t[1]);return n}function s(e,t){e.css({"-moz-transform":t,"-webkit-transform":t,"-ms-transform":t,"-o-transform":t,transform:t})}var o="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",a=e(".csstransitions").length>0;a||(o="noTransition"),t.prototype.initSchedule=function(){this.scheduleReset(),this.initEvents()},t.prototype.scheduleReset=function(){var e=this.mq();"desktop"!=e||this.element.hasClass("js-full")?"mobile"==e&&this.element.hasClass("js-full")?(this.element.removeClass("js-full loading"),this.eventsGroup.children("ul").add(this.singleEvents).removeAttr("style"),this.eventsWrapper.children(".grid-line").remove(),this.element.hasClass("modal-is-open")&&this.checkEventModal()):"desktop"==e&&this.element.hasClass("modal-is-open")?(this.checkEventModal("desktop"),this.element.removeClass("loading")):this.element.removeClass("loading"):(this.eventSlotHeight=this.eventsGroup.eq(0).children(".top-info").outerHeight(),this.element.addClass("js-full"),this.placeEvents(),this.element.hasClass("modal-is-open")&&this.checkEventModal())},t.prototype.initEvents=function(){var t=this;this.singleEvents.each(function(){var n,i='<span class="event-date">'+e(this).data("start")+" - "+e(this).data("end")+"</span>";e(this).children("a").prepend(e(i)),e(this).on("click","a",function(n){n.preventDefault(),t.animating||t.openModal(e(this))}),e(this).on("mouseenter",function(t){t.preventDefault(),e(this).hasClass("overflow-present")&&(n=e(this).height(),e(this).css("height","auto"))}),e(this).on("mouseleave",function(t){e(this).hasClass("overflow-present")&&(t.preventDefault(),e(this).css("height",n))})}),this.modal.on("click",".close",function(e){e.preventDefault(),t.animating||t.closeModal(t.eventsGroup.find(".selected-event"))}),this.element.on("click",".cover-layer",function(e){!t.animating&&t.element.hasClass("modal-is-open")&&t.closeModal(t.eventsGroup.find(".selected-event"))})},t.prototype.placeEvents=function(){var t=this;this.singleEvents.each(function(){var n=i(e(this).attr("data-start")),s=i(e(this).attr("data-end"))-n,o=t.eventSlotHeight*(n-t.timelineStart)/t.timelineUnitDuration,a=t.eventSlotHeight*s/t.timelineUnitDuration,l=e(this).height();e(this).css({top:o-1+"px",height:a+1+"px"}),console.log("original height "+l),console.log("new height "+a),a<l&&(console.log("overflow!"),e(this).addClass("overflow-present"))}),this.element.removeClass("loading")},t.prototype.openModal=function(t){var n=this,i=n.mq();this.animating=!0;var l,d=t.find(".schedule-event-teacher");if(this.modalHeader.find(".schedule-event-name").text(t.find(".schedule-event-name").text()),this.modalHeader.find(".event-date").text(t.find(".event-date").text()),this.modal.attr("data-event",t.parent().attr("data-event")),0!=d.length&&(0!=d.attr("data-link").length?this.modalHeader.find(".schedule-event-name").after('<a class="schedule-event-teacher" href="'+d.attr("data-link")+'">'+d.text()+"</a>"):this.modalHeader.find(".schedule-event-name").after('<span class="schedule-event-teacher">'+d.text()+"</span>")),l=t.parent().find(".schedule-event-content").html(),this.modalBody.find(".event-info").html("<div>"+l+"<div>"),n.element.addClass("content-loaded"),this.element.addClass("modal-is-open"),setTimeout(function(){t.parent("li").addClass("selected-event")},10),"mobile"==i)n.modal.one(o,function(){n.modal.off(o),n.animating=!1});else{var r=t.offset().top-e(window).scrollTop(),h=t.offset().left,m=t.innerHeight(),f=t.innerWidth(),c=e(window).width(),u=e(window).height(),p=.8*c>n.modalMaxWidth?n.modalMaxWidth:.8*c,v=.8*u>n.modalMaxHeight?n.modalMaxHeight:.8*u,g=parseInt((c-p)/2-h),w=parseInt((u-v)/2-r),y=v/m,x=p-f;n.modal.css({top:r+"px",left:h+"px",height:v+"px",width:p+"px"}),s(n.modal,"translateY("+w+"px) translateX("+g+"px)"),n.modalHeader.css({width:f+"px"}),n.modalBody.css({marginLeft:f+"px"}),n.modalBodyBg.css({height:m+"px",width:"1px"}),s(n.modalBodyBg,"scaleY("+y+") scaleX("+x+")"),n.modalHeaderBg.css({height:m+"px",width:f+"px"}),s(n.modalHeaderBg,"scaleY("+y+")"),n.modalHeaderBg.one(o,function(){n.modalHeaderBg.off(o),n.animating=!1,n.element.addClass("animation-completed")})}a||n.modal.add(n.modalHeaderBg).trigger(o)},t.prototype.closeModal=function(t){var n=this,i=n.mq();if(this.animating=!0,"mobile"==i)this.element.removeClass("modal-is-open"),this.modal.one(o,function(){n.modal.off(o),n.animating=!1,n.element.removeClass("content-loaded"),t.removeClass("selected-event")});else{var l=t.offset().top-e(window).scrollTop(),d=t.offset().left,r=t.innerHeight(),h=t.innerWidth(),m=Number(n.modal.css("top").replace("px","")),f=Number(n.modal.css("left").replace("px","")),c=d-f,u=l-m;n.element.removeClass("animation-completed modal-is-open"),this.modal.css({width:h+"px",height:r+"px"}),s(n.modal,"translateX("+c+"px) translateY("+u+"px)"),s(n.modalBodyBg,"scaleX(0) scaleY(1)"),s(n.modalHeaderBg,"scaleY(1)"),this.modalHeaderBg.one(o,function(){n.modalHeaderBg.off(o),n.modal.addClass("no-transition"),setTimeout(function(){n.modal.add(n.modalHeader).add(n.modalBody).add(n.modalHeaderBg).add(n.modalBodyBg).attr("style","")},10),setTimeout(function(){n.modal.removeClass("no-transition")},20),n.animating=!1,n.element.removeClass("content-loaded"),t.removeClass("selected-event")})}this.modalHeader.find(".schedule-event-teacher").remove(),a||n.modal.add(n.modalHeaderBg).trigger(o)},t.prototype.mq=function(){return window.getComputedStyle(this.element.get(0),"::before").getPropertyValue("content").replace(/["']/g,"")},t.prototype.checkEventModal=function(t){this.animating=!0;var n=this,i=this.mq();if("mobile"==i)n.modal.add(n.modalHeader).add(n.modalHeaderBg).add(n.modalBody).add(n.modalBodyBg).attr("style",""),n.modal.removeClass("no-transition"),n.animating=!1;else if("desktop"==i&&n.element.hasClass("modal-is-open")){n.modal.addClass("no-transition"),n.element.addClass("animation-completed");var o=n.eventsGroup.find(".selected-event"),a=(o.offset().top-e(window).scrollTop(),o.offset().left,o.innerHeight()),l=o.innerWidth(),d=e(window).width(),r=e(window).height(),h=.8*d>n.modalMaxWidth?n.modalMaxWidth:.8*d,m=.8*r>n.modalMaxHeight?n.modalMaxHeight:.8*r,f=m/a,c=h-l;setTimeout(function(){n.modal.css({width:h+"px",height:m+"px",top:r/2-m/2+"px",left:d/2-h/2+"px"}),s(n.modal,"translateY(0) translateX(0)"),n.modalBodyBg.css({height:m+"px",width:"1px"}),s(n.modalBodyBg,"scaleX("+c+")"),n.modalHeader.css({width:l+"px"}),n.modalBody.css({marginLeft:l+"px"}),n.modalHeaderBg.css({height:a+"px",width:l+"px"}),s(n.modalHeaderBg,"scaleY("+f+")")},10),setTimeout(function(){n.modal.removeClass("no-transition"),n.animating=!1},20)}};var l=e(".mro-schedule"),d=[],r=!1;l.length>0&&l.each(function(){d.push(new t(e(this)))}),e(window).on("resize",function(){r||(r=!0,window.requestAnimationFrame?window.requestAnimationFrame(n):setTimeout(n))}),e(window).keyup(function(e){27==e.keyCode&&d.forEach(function(e){e.closeModal(e.eventsGroup.find(".selected-event"))})})}),function(){var e=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,t=navigator.userAgent.toLowerCase().indexOf("opera")>-1,n=navigator.userAgent.toLowerCase().indexOf("msie")>-1;(e||t||n)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var e,t=location.hash.substring(1);/^[A-z0-9_-]+$/.test(t)&&(e=document.getElementById(t),e&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus()))},!1)}();