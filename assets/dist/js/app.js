jQuery(document).ready(function(e){e(document).foundation()}),!function(e,t,n){function i(e,t){return typeof e===t}function o(){var e,t,n,o,s,a,l;for(var d in y)if(y.hasOwnProperty(d)){if(e=[],t=y[d],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(o=i(t.fn,"function")?t.fn():t.fn,s=0;s<e.length;s++)a=e[s],l=a.split("."),1===l.length?C[l[0]]=o:(!C[l[0]]||C[l[0]]instanceof Boolean||(C[l[0]]=new Boolean(C[l[0]])),C[l[0]][l[1]]=o),w.push((o?"":"no-")+l.join("-"))}}function s(e){var t=B.className,n=C._config.classPrefix||"";if(H&&(t=t.baseVal),C._config.enableJSClass){var i=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(i,"$1"+n+"js$2")}C._config.enableClasses&&(t+=" "+n+e.join(" "+n),H?B.className.baseVal=t:B.className=t)}function a(e,t){return function(){return e.apply(t,arguments)}}function l(e,t,n){var o;for(var s in e)if(e[s]in t)return n===!1?e[s]:(o=t[e[s]],i(o,"function")?a(o,n||t):o);return!1}function d(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):H?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function r(e,t){return!!~(""+e).indexOf(t)}function m(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function h(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function f(){var e=t.body;return e||(e=d(H?"svg":"body"),e.fake=!0),e}function c(e,n,i,o){var s,a,l,r,m="modernizr",h=d("div"),c=f();if(parseInt(i,10))for(;i--;)l=d("div"),l.id=o?o[i]:m+(i+1),h.appendChild(l);return s=d("style"),s.type="text/css",s.id="s"+m,(c.fake?c:h).appendChild(s),c.appendChild(h),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(t.createTextNode(e)),h.id=m,c.fake&&(c.style.background="",c.style.overflow="hidden",r=B.style.overflow,B.style.overflow="hidden",B.appendChild(c)),a=n(h,e),c.fake?(c.parentNode.removeChild(c),B.style.overflow=r,B.offsetHeight):h.parentNode.removeChild(h),!!a}function p(t,i){var o=t.length;if("CSS"in e&&"supports"in e.CSS){for(;o--;)if(e.CSS.supports(h(t[o]),i))return!0;return!1}if("CSSSupportsRule"in e){for(var s=[];o--;)s.push("("+h(t[o])+":"+i+")");return s=s.join(" or "),c("@supports ("+s+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return n}function u(e,t,o,s){function a(){h&&(delete M.style,delete M.modElem)}if(s=!i(s,"undefined")&&s,!i(o,"undefined")){var l=p(e,o);if(!i(l,"undefined"))return l}for(var h,f,c,u,g,v=["modernizr","tspan","samp"];!M.style&&v.length;)h=!0,M.modElem=d(v.shift()),M.style=M.modElem.style;for(c=e.length,f=0;c>f;f++)if(u=e[f],g=M.style[u],r(u,"-")&&(u=m(u)),M.style[u]!==n){if(s||i(o,"undefined"))return a(),"pfx"!=t||u;try{M.style[u]=o}catch(w){}if(M.style[u]!=g)return a(),"pfx"!=t||u}return a(),!1}function g(e,t,n,o,s){var a=e.charAt(0).toUpperCase()+e.slice(1),d=(e+" "+E.join(a+" ")+a).split(" ");return i(t,"string")||i(t,"undefined")?u(d,t,o,s):(d=(e+" "+S.join(a+" ")+a).split(" "),l(d,t,n))}function v(e,t,i){return g(e,n,n,t,i)}var w=[],y=[],x={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){y.push({name:e,fn:t,options:n})},addAsyncTest:function(e){y.push({name:null,fn:e})}},C=function(){};C.prototype=x,C=new C;var B=t.documentElement,H="svg"===B.nodeName.toLowerCase(),b="Moz O ms Webkit",E=x._config.usePrefixes?b.split(" "):[];x._cssomPrefixes=E;var S=x._config.usePrefixes?b.toLowerCase().split(" "):[];x._domPrefixes=S;var k={elem:d("modernizr")};C._q.push(function(){delete k.elem});var M={style:k.elem.style};C._q.unshift(function(){delete M.style}),x.testAllProps=g,x.testAllProps=v,C.addTest("csstransitions",v("transition","all",!0)),o(),s(w),delete x.addTest,delete x.addAsyncTest;for(var T=0;T<C._q.length;T++)C._q[T]();e.Modernizr=C}(window,document),jQuery(document).ready(function(e){function t(e){this.element=e,this.timeline=this.element.find(".timeline"),this.timelineItems=this.timeline.find("li"),this.timelineItemsNumber=this.timelineItems.length,this.timelineStart=i(this.timelineItems.eq(0).text()),this.timelineUnitDuration=i(this.timelineItems.eq(1).text())-i(this.timelineItems.eq(0).text()),this.eventsWrapper=this.element.find(".events"),this.eventsGroup=this.eventsWrapper.find(".events-group"),this.singleEvents=this.eventsGroup.find(".single-event"),this.eventSlotHeight=this.eventsGroup.eq(0).children(".top-info").outerHeight(),this.modal=this.element.find(".event-modal"),this.modalHeader=this.modal.find(".header"),this.modalHeaderBg=this.modal.find(".header-bg"),this.modalBody=this.modal.find(".body"),this.modalBodyBg=this.modal.find(".body-bg"),this.modalMaxWidth=800,this.modalMaxHeight=480,this.animating=!1,this.initSchedule()}function n(){d.forEach(function(e){e.scheduleReset()}),r=!1}function i(e){e=e.replace(/ /g,"");var t=e.split(":"),n=60*parseInt(t[0])+parseInt(t[1]);return n}function o(e,t){e.css({"-moz-transform":t,"-webkit-transform":t,"-ms-transform":t,"-o-transform":t,transform:t})}var s="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",a=e(".csstransitions").length>0;a||(s="noTransition"),t.prototype.initSchedule=function(){this.scheduleReset(),this.initEvents()},t.prototype.scheduleReset=function(){var e=this.mq();"desktop"!=e||this.element.hasClass("js-full")?"mobile"==e&&this.element.hasClass("js-full")?(this.element.removeClass("js-full loading"),this.eventsGroup.children("ul").add(this.singleEvents).removeAttr("style"),this.eventsWrapper.children(".grid-line").remove(),this.element.hasClass("modal-is-open")&&this.checkEventModal()):"desktop"==e&&this.element.hasClass("modal-is-open")?(this.checkEventModal("desktop"),this.element.removeClass("loading")):this.element.removeClass("loading"):(this.eventSlotHeight=this.eventsGroup.eq(0).children(".top-info").outerHeight(),this.element.addClass("js-full"),this.placeEvents(),this.element.hasClass("modal-is-open")&&this.checkEventModal())},t.prototype.initEvents=function(){var t=this;this.singleEvents.each(function(){var n,i='<span class="event-date">'+e(this).data("start")+" - "+e(this).data("end")+"</span>";e(this).children("a").prepend(e(i)),e(this).on("click","a",function(n){n.preventDefault(),t.animating||t.openModal(e(this))}),e(this).on("mouseenter",function(t){t.preventDefault(),e(this).hasClass("overflow-present")&&(n=e(this).height(),e(this).css("height","auto"))}),e(this).on("mouseleave",function(t){e(this).hasClass("overflow-present")&&(t.preventDefault(),e(this).css("height",n))})}),this.modal.on("click",".close",function(e){e.preventDefault(),t.animating||t.closeModal(t.eventsGroup.find(".selected-event"))}),this.element.on("click",".cover-layer",function(e){!t.animating&&t.element.hasClass("modal-is-open")&&t.closeModal(t.eventsGroup.find(".selected-event"))})},t.prototype.placeEvents=function(){var t=this;this.singleEvents.each(function(){var n=i(e(this).attr("data-start")),o=i(e(this).attr("data-end"))-n,s=t.eventSlotHeight*(n-t.timelineStart)/t.timelineUnitDuration,a=t.eventSlotHeight*o/t.timelineUnitDuration,l=e(this).height();e(this).css({top:s-1+"px",height:a+1+"px"}),console.log("original height "+l),console.log("new height "+a),a<l&&(console.log("overflow!"),e(this).addClass("overflow-present"))}),this.element.removeClass("loading")},t.prototype.openModal=function(t){var n=this,i=n.mq();this.animating=!0;var l;if(this.modalHeader.find(".schedule-event-name").text(t.find(".schedule-event-name").text()),this.modalHeader.find(".event-date").text(t.find(".event-date").text()),this.modal.attr("data-event",t.parent().attr("data-event")),l=t.parent().find(".schedule-event-content").text(),this.modalBody.find(".event-info").html("<div>"+l+"<div>"),n.element.addClass("content-loaded"),this.element.addClass("modal-is-open"),setTimeout(function(){t.parent("li").addClass("selected-event")},10),"mobile"==i)n.modal.one(s,function(){n.modal.off(s),n.animating=!1});else{var d=t.offset().top-e(window).scrollTop(),r=t.offset().left,m=t.innerHeight(),h=t.innerWidth(),f=e(window).width(),c=e(window).height(),p=.8*f>n.modalMaxWidth?n.modalMaxWidth:.8*f,u=.8*c>n.modalMaxHeight?n.modalMaxHeight:.8*c,g=parseInt((f-p)/2-r),v=parseInt((c-u)/2-d),w=u/m,y=p-h;n.modal.css({top:d+"px",left:r+"px",height:u+"px",width:p+"px"}),o(n.modal,"translateY("+v+"px) translateX("+g+"px)"),n.modalHeader.css({width:h+"px"}),n.modalBody.css({marginLeft:h+"px"}),n.modalBodyBg.css({height:m+"px",width:"1px"}),o(n.modalBodyBg,"scaleY("+w+") scaleX("+y+")"),n.modalHeaderBg.css({height:m+"px",width:h+"px"}),o(n.modalHeaderBg,"scaleY("+w+")"),n.modalHeaderBg.one(s,function(){n.modalHeaderBg.off(s),n.animating=!1,n.element.addClass("animation-completed")})}a||n.modal.add(n.modalHeaderBg).trigger(s)},t.prototype.closeModal=function(t){var n=this,i=n.mq();if(this.animating=!0,"mobile"==i)this.element.removeClass("modal-is-open"),this.modal.one(s,function(){n.modal.off(s),n.animating=!1,n.element.removeClass("content-loaded"),t.removeClass("selected-event")});else{var l=t.offset().top-e(window).scrollTop(),d=t.offset().left,r=t.innerHeight(),m=t.innerWidth(),h=Number(n.modal.css("top").replace("px","")),f=Number(n.modal.css("left").replace("px","")),c=d-f,p=l-h;n.element.removeClass("animation-completed modal-is-open"),this.modal.css({width:m+"px",height:r+"px"}),o(n.modal,"translateX("+c+"px) translateY("+p+"px)"),o(n.modalBodyBg,"scaleX(0) scaleY(1)"),o(n.modalHeaderBg,"scaleY(1)"),this.modalHeaderBg.one(s,function(){n.modalHeaderBg.off(s),n.modal.addClass("no-transition"),setTimeout(function(){n.modal.add(n.modalHeader).add(n.modalBody).add(n.modalHeaderBg).add(n.modalBodyBg).attr("style","")},10),setTimeout(function(){n.modal.removeClass("no-transition")},20),n.animating=!1,n.element.removeClass("content-loaded"),t.removeClass("selected-event")})}a||n.modal.add(n.modalHeaderBg).trigger(s)},t.prototype.mq=function(){return window.getComputedStyle(this.element.get(0),"::before").getPropertyValue("content").replace(/["']/g,"")},t.prototype.checkEventModal=function(t){this.animating=!0;var n=this,i=this.mq();if("mobile"==i)n.modal.add(n.modalHeader).add(n.modalHeaderBg).add(n.modalBody).add(n.modalBodyBg).attr("style",""),n.modal.removeClass("no-transition"),n.animating=!1;else if("desktop"==i&&n.element.hasClass("modal-is-open")){n.modal.addClass("no-transition"),n.element.addClass("animation-completed");var s=n.eventsGroup.find(".selected-event"),a=(s.offset().top-e(window).scrollTop(),s.offset().left,s.innerHeight()),l=s.innerWidth(),d=e(window).width(),r=e(window).height(),m=.8*d>n.modalMaxWidth?n.modalMaxWidth:.8*d,h=.8*r>n.modalMaxHeight?n.modalMaxHeight:.8*r,f=h/a,c=m-l;setTimeout(function(){n.modal.css({width:m+"px",height:h+"px",top:r/2-h/2+"px",left:d/2-m/2+"px"}),o(n.modal,"translateY(0) translateX(0)"),n.modalBodyBg.css({height:h+"px",width:"1px"}),o(n.modalBodyBg,"scaleX("+c+")"),n.modalHeader.css({width:l+"px"}),n.modalBody.css({marginLeft:l+"px"}),n.modalHeaderBg.css({height:a+"px",width:l+"px"}),o(n.modalHeaderBg,"scaleY("+f+")")},10),setTimeout(function(){n.modal.removeClass("no-transition"),n.animating=!1},20)}};var l=e(".mro-schedule"),d=[],r=!1;l.length>0&&l.each(function(){d.push(new t(e(this)))}),e(window).on("resize",function(){r||(r=!0,window.requestAnimationFrame?window.requestAnimationFrame(n):setTimeout(n))}),e(window).keyup(function(e){27==e.keyCode&&d.forEach(function(e){e.closeModal(e.eventsGroup.find(".selected-event"))})})}),function(){var e=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,t=navigator.userAgent.toLowerCase().indexOf("opera")>-1,n=navigator.userAgent.toLowerCase().indexOf("msie")>-1;(e||t||n)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var e,t=location.hash.substring(1);/^[A-z0-9_-]+$/.test(t)&&(e=document.getElementById(t),e&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus()))},!1)}();